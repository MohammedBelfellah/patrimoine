{% extends "core/base.html" %}
{% block title %}Interventions{% endblock %}
{% block content %}
<div class="card">
  <h2>ðŸ”§ Interventions</h2>

  <div style="margin-bottom: 16px;">
    <a href="{% url 'intervention-create' %}" class="btn btn-primary">+ Ajouter une intervention</a>
  </div>

  {% if interventions %}
  <table style="width: 100%; border-collapse: collapse;">
    <thead>
      <tr style="background: #f0f0f0;">
        <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Projet</th>
        <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Patrimoine</th>
        <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Type</th>
        <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Statut</th>
        <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">DÃ©but</th>
        <th style="padding: 10px; text-align: center; border-bottom: 1px solid #ddd;">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for inter in interventions %}
      <tr style="border-bottom: 1px solid #ddd;">
        <td style="padding: 10px;">{{ inter.nom_projet }}</td>
        <td style="padding: 10px;">{{ inter.id_patrimoine.nom_fr }}</td>
        <td style="padding: 10px;">{{ inter.get_type_intervention_display }}</td>
        <td style="padding: 10px;"><strong>{{ inter.get_statut_display }}</strong></td>
        <td style="padding: 10px;">{{ inter.date_debut|date:"d/m/Y" }}</td>
        <td style="padding: 10px; text-align: center; white-space: nowrap;">
          <a href="{% url 'intervention-detail' inter.id_intervention %}" class="btn btn-secondary" style="padding: 4px 10px;">Voir</a>
          <a href="{% url 'intervention-edit' inter.id_intervention %}" class="btn btn-primary" style="padding: 4px 10px;">Ã‰diter</a>
          <form method="post" action="{% url 'intervention-delete' inter.id_intervention %}" style="display: inline;" onsubmit="return confirm('Supprimer cette intervention ?');">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger" style="padding: 4px 10px;">Supprimer</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p class="muted">Aucune intervention enregistrÃ©e.</p>
  {% endif %}
</div>
{% endblock %}
